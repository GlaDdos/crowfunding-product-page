<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Commissioner:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/main.css" >
  
  <title>Frontend Mentor | Crowdfunding product page</title>

</head>
<body>
  <header>
    <div class="header-menu-wrapper">
      <div class="logo">
        <img src="./images/logo.svg" alt="logo">
      </div>
      <nav data-menu>
        <ul>
          <li><a href="#">About</a></li>
          <li><a href="#">Discover</a></li>
          <li><a href="#">Get Started</a></li>
        </ul>
      </nav>
      <div class="hamburger-menu">
        <img class='active' src="./images/icon-hamburger.svg" alt="hamburger menu icon" data-hamburger-menu-open>
        <img src="./images/icon-close-menu.svg" alt="hamburger menu close" data-hamburger-menu-close>
      </div>
      <div class="menu-overlay" data-menu-overlay></div>
    </div>
  </header>

  <main>
    <section>
      <h1>Mastercraft Bamboo Monitor Riser</h1>
      <p>A beautiful & handcrafted monitor stand to reduce neck and eye strain.</p>
      <div class="row">
        <button data-modal-open>Back this project</button>
        <div class="bookmark" data-button-bookmark>
          <div class="icon">
            <svg width="56" height="56" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><circle  fill="#2F2F2F" cx="28" cy="28" r="28"/><path fill="#B1B1B1" d="M23 19v18l5-5.058L33 37V19z"/></g></svg>
          </div>
          <div class="description">Bookmark</div>
        </div>
      </div>
    </section>

    <section>
      <div class="pledge-summary-container">
        <div class="pledge-item">
          <span id="pledge-amount-backed">$89,914</span>
          <p>of <span class="small" id="pledge-amount-goal">$100,000</span> backed</p>
        </div>

        <div class="pledge-item">
          <span id="pledge-amount-backers">5,007</span>
          <p>total backers</p>
        </div>

        <div class="pledge-item">
          <span id="pledge-amount-days">56</span>
          <p> days left</p>
        </div>
      </div>
      <div class="progress-bar" id="progress-bar">
        <div class="fill"></div>
      </div>
    </section>

    <section>
      <h2>About this project</h2>
      <p class="align-left">
        The Mastercraft Bamboo Monitor Riser is a sturdy and stylish platform that elevates your screen 
        to a more comfortable viewing height. Placing your monitor at eye level has the potential to improve 
        your posture and make you more comfortable while at work, helping you stay focused on the task at hand.
      </p>
      <p class="align-left">
        Featuring artisan craftsmanship, the simplicity of design creates extra desk space below your computer 
        to allow notepads, pens, and USB sticks to be stored under the stand.
      </p>

      <article class="pledge-card">
        <div class="header">
          <h3>Bamboo Stand</h3>
          <p>Pledge $25 or more</p>
        </div>
        <div class="content">
          <p class="align-left">
            You get an ergonomic stand made of natural bamboo. You've helped us launch our promotional campaign, and 
            you’ll be added to a special Backer member list.
          </p>
        </div>

        <div class="footer">
          <div class="items-left">
            <span>101</span>
            <p>left</p>
          </div>

          <button data-pledge-card="1">Select Reward</button>
        </div>

      </article>

      <article class="pledge-card">
        <div class="header">
          <h3>Black Edition Stand</h3>
          <p>Pledge $75 or more</p>
        </div>

        <div class="content">
          <p class="align-left">
            You get a Black Special Edition computer stand and a personal thank you. You’ll be added to our Backer 
            member list. Shipping is included.
          </p>
        </div>

        <div class="footer">
          <div class="items-left">
            <span>64</span>
            <p>left</p>
          </div>
  
          <button data-pledge-card="2">Select Reward</button>
        </div>
      </article>

      <article class="pledge-card inactive">
        <div class="header">
          <h3>Mahogany Special Edition</h3>
          <p>Pledge $200 or more</p>
        </div>

        <p class="align-left">
          You get two Special Edition Mahogany stands, a Backer T-Shirt, and a personal thank you. You’ll be added 
          to our Backer member list. Shipping is included.
        </p>

        <div class="footer">
          <div class="items-left">
            <span>0</span>
            <p>left</p>
          </div>
          <button>Out of Stock</button>
        </div>

      </article>
    </section>
  </main>

  <div class="modal close" data-modal-main>
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="m-header">
          <div class="wrapper">
            <h2>Back this project</h2>
            <img src="./images/icon-close-modal.svg" alt="close modal icon" class="modal-close" data-modal-close>
          </div>
          <p>Want to support us in bringing Mastercraft Bamboo Monitor Riser out in the world?</p>
        </div>
        <div class="m-body">
          <div class="pledge-card">
            <div class="header" data-modal-radio-button>
              <div class="radio"></div>
              <div class="wrap">
                <h3>Pledge with no reward</h3>
              </div>
            </div>
            <div class="content">
              <p class="align-left">  Choose to support us without a reward if you simply believe in our project. As a backer, 
                you will be signed up to receive product updates via email.</p>
            </div>

            <div class="pledge-form close">
              <p>Enter your pledge</p>
              <form>
                <div class="input-wrapper">
                  <input name='pledge' type="number" step="0.01" value="25">
                </div>
                <input type="submit" value="Continue">
              </form>
            </div>
          </div>

          <div class="pledge-card" data-pledge-card="1">
            <div class="header" data-modal-radio-button>
              <div class="radio"></div>
              <div class="wrap">
                <h3>Bamboo Stand</h3>
                <p>Pledge $25 or more</p>
              </div>
            </div>
            <div class="content">
              <p class="align-left">You get an ergonomic stand made of natural bamboo. You've helped us launch our promotional campaign, and
                you’ll be added to a special Backer member list.</p>
            </div>

            <div class="footer">
              <div class="items-left">
                <span>101</span>
                <p>left</p>
              </div>
            </div>

            <div class="pledge-form close">
              <p>Enter your pledge</p>
              <form>
                <div class="input-wrapper">
                  <input name="pledge" type="number" step="0.01" value="25">
                </div>
                <input type="submit" value="Continue">
              </form>
            </div>
          </div>

          <div class="pledge-card" data-pledge-card="2" >
            <div class="header" data-modal-radio-button>
              <div class="radio"></div>
              <div class="wrap">
                <h3>Black Edition Stand</h3>
                <p>Pledge $75 or more</p>
              </div>
            </div>
            <div class="content">
              <p class="align-left">You get a Black Special Edition computer stand and a personal thank you. You’ll be added to our Backer
                member list. Shipping is included.</p>
            </div>

            <div class="footer">
              <div class="items-left">
                <span>64</span>
                <p>left</p>
              </div>
            </div>

            <div class="pledge-form close">
              <p>Enter your pledge</p>
              <form>
                <div class="input-wrapper">
                  <input name="pledge" type="number" step="0.01" value="25">
                </div>
                <input type="submit" value="Continue">
              </form>
            </div>
          </div>

          <div class="pledge-card inactive">
            <div class="header">
              <div class="radio" data-modal-radio-button></div>
              <div class="content">
                <h3>Mahogany Special Edition</h3>
                <p>Pledge $200 or more</p>
              </div>
            </div>
            <div class="content">
              <p class="align-left">You get two Special Edition Mahogany stands, a Backer T-Shirt, and a personal thank you. You’ll be added
                to our Backer member list. Shipping is included.</p>
            </div>

            <div class="footer">
              <div class="items-left">
                <span>0</span>
                <p>left</p>
              </div>
            </div>

            <div class="pledge-form close">
              <p>Enter your pledge</p>
              <form>
                <div class="input-wrapper">
                  <input name="pledge" type="number" step="0.01" value="25">
                </div>
                <input type="submit" value="Continue">
              </form>
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>

  <div class="modal modal-support" data-modal-support>
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="m-body">
          <img src="./images/icon-check.svg" />
          <h2>Thanks for your support!</h2>
          <p>Your pledge brings us one step closer to sharing Mastercraft Bamboo Monitor Riser worldwide. You will get
            an email once our campaign is completed.</p>
            <button>Got it</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    const hamburger_menu_open = document.querySelector('[data-hamburger-menu-open]');
    const hamburger_menu_close = document.querySelector('[data-hamburger-menu-close]');
    const menu = document.querySelector('[data-menu]');
    const menu_overlay = document.querySelector('[data-menu-overlay]');

    const modal_main = document.querySelector("[data-modal-main]");
    const modal_main_close = modal_main.querySelector("[data-modal-close]");
    const modal_radio_buttons = modal_main.querySelectorAll('[data-modal-radio-button]');

    const modal_support = document.querySelector("[data-modal-support]");
    const modal_support_close_button = modal_support.getElementsByTagName('button')[0];
    
    const main_modal_button_open = document.querySelector("[data-modal-open]");
    const pledge_buttons = document.querySelectorAll('button[data-pledge-card');
    const bookmark_button = document.querySelector('[data-button-bookmark');
    const progress_bar = document.getElementById('progress-bar');

    const modal_forms = modal_main.getElementsByTagName('form');

    //data
    let pledge_amount_backed = document.getElementById('pledge-amount-backed');
    let pledge_amount_backers = document.getElementById('pledge-amount-backers');
    let pledge_amount_goal = document.getElementById('pledge-amount-goal');

    hamburger_menu_open.addEventListener('click', event => {
      menu.classList.toggle('active');
      hamburger_menu_open.classList.toggle('active');
      hamburger_menu_close.classList.toggle('active');
      menu_overlay.classList.toggle('active');
    });

    hamburger_menu_close.addEventListener('click', event => {
      menu.classList.toggle('active');
      hamburger_menu_open.classList.toggle('active');
      hamburger_menu_close.classList.toggle('active');
      menu_overlay.classList.toggle('active');
    });

    menu_overlay.addEventListener('click', event => {
      menu.classList.toggle('active');
      hamburger_menu_open.classList.toggle('active');
      hamburger_menu_close.classList.toggle('active');
      menu_overlay.classList.toggle('active');
    });

    main_modal_button_open.addEventListener('click', event => {
      const currentActiveCard = modal_main.querySelector('.pledge-card.active');
      if(currentActiveCard) {
          currentActiveCard.classList.remove('active');
          const currentPledgeForm = currentActiveCard.querySelector('.pledge-form.active');
          
          if(currentPledgeForm) currentPledgeForm.classList.remove('active');
        }
      modal_main.classList.toggle('active');
    });

    modal_main_close.addEventListener('click', event => {
      modal_main.classList.toggle("active");
    });

    modal_radio_buttons.forEach(button => {
      button.addEventListener('click', event => {
        const currentActiveCard = modal_main.querySelector('.pledge-card.active');
        
        if(currentActiveCard) {
          currentActiveCard.classList.remove('active');
          const currentPledgeForm = currentActiveCard.querySelector('.pledge-form.active');
          
          if(currentPledgeForm) currentPledgeForm.classList.remove('active');
        }

        const pledgeCard = event.target.closest('.pledge-card');
        
        if(pledgeCard) {
          const pledgeForm = pledgeCard.querySelector('.pledge-form');

          pledgeCard.classList.toggle('active');
          pledgeForm.classList.add('active');
        } 
      });
    });
    
    pledge_buttons.forEach(button => {
      button.addEventListener('click', event => {
        let pledgeCard = event.target.dataset.pledgeCard;
        modal_main.classList.add('active');
        selectReward(pledgeCard, modal_main);

      });
    });

    bookmark_button.addEventListener('click', event => {
      event.currentTarget.classList.toggle('active');
    });

    modal_support_close_button.addEventListener('click', event => {
      modal_support.classList.remove('active');
    });

    Array(...modal_forms).forEach(form => {
      form.addEventListener('submit', event => {
        event.preventDefault();

        let valuePledged = Number(form.elements['pledge'].value.replace(/[^.\d]/g, ''));
        let pledge = Number(pledge_amount_backed.innerText.replace(/[^.\d]/g, ''));

        pledge_amount_backed.innerText = '$' + new Intl.NumberFormat('en-IN').format(valuePledged + pledge);
        pledge_amount_backers.innerText = Number(pledge_amount_backers.innerText.replace(/[^.\d]/g, '')) + 1;
        goal = Number(pledge_amount_goal.innerText.replace(/[^.\d]/g, ''));

        modal_main.classList.remove('active');
        modal_support.classList.add('active');

        progressBarCalculateLength(valuePledged + pledge, goal);
      });
    });

    function selectReward(pledgeId, modal) {
      const currentActiveCard = modal.querySelector('.pledge-card.active');
      if(currentActiveCard) {
          currentActiveCard.classList.remove('active');
          const currentPledgeForm = currentActiveCard.querySelector('.pledge-form.active');
          
          if(currentPledgeForm) currentPledgeForm.classList.remove('active');
      }

      const selectedPledgeCard = modal.querySelector(`.pledge-card[data-pledge-card="${pledgeId}"]`);
      if(selectedPledgeCard) {
          
          const pledgeForm = selectedPledgeCard.querySelector('.pledge-form');
          selectedPledgeCard.classList.add('active');
          pledgeForm.classList.add('active');

          selectedPledgeCard.scrollIntoView();
        }
    }

    function progressBarCalculateLength(pledge, goal) {
      let width = Math.round(pledge / goal * 100);

      if(width > 100) {
        width = 100;
      }

      progress_bar.querySelector('.fill').style.width = width + '%';
    }

  </script>
</body>
</html>
